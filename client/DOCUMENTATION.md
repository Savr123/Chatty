# Chatty - Документация проекта

## Обзор проекта

**Chatty** - это веб-приложение для обмена сообщениями в реальном времени, построенное на React с использованием Material-UI и SignalR для real-time коммуникации.

## Технологический стек

### Frontend
- **React 18.3.1** - основной фреймворк
- **Material-UI (MUI) 6.1.4** - компоненты пользовательского интерфейса
- **Redux Toolkit 2.3.0** - управление состоянием
- **Redux Persist 6.0.0** - сохранение состояния в localStorage
- **React Router DOM 6.27.0** - маршрутизация
- **SignalR 8.0.7** - real-time коммуникация
- **React Custom Scrollbars 2** - кастомные скроллбары

### Backend интеграция
- **ASP.NET Core API** (внешний проект)
- **SignalR Hub** для real-time сообщений
- **REST API** для аутентификации и управления пользователями

## Структура проекта

```
src/
├── Components/           # React компоненты
│   ├── Account/         # Компоненты аутентификации
│   │   ├── SignIn.js    # Форма входа
│   │   ├── SignUp.js    # Форма регистрации
│   │   └── SignOut.js   # Выход из системы
│   ├── Chat/            # Компоненты чата
│   │   ├── Chat.js      # Основной компонент чата
│   │   ├── ChatInput/   # Ввод сообщений
│   │   │   └── ChatInput.js
│   │   ├── ChatWindow/  # Окно чата
│   │   │   ├── ChatWindow.js
│   │   │   └── Message/ # Отдельное сообщение
│   │   │       └── Message.js
│   │   └── style/       # Стили чата
│   │       └── Chat.css
│   └── NavBar.js        # Навигационная панель
├── Redux/               # Управление состоянием
│   ├── Slices/          # Redux слайсы
│   │   └── UserSlice.js # Состояние пользователя
│   └── store.js         # Конфигурация Redux store
├── Pages/               # Страницы приложения (пустая)
├── App.js              # Главный компонент
├── index.js            # Точка входа
└── *.css               # Глобальные стили
```

## Архитектура приложения

### 1. Маршрутизация
Приложение использует React Router для навигации между страницами:
- `/` - главная страница с чатом
- `/signIn` - страница входа
- `/signUp` - страница регистрации

### 2. Управление состоянием
- **Redux Toolkit** для централизованного управления состоянием
- **Redux Persist** для сохранения состояния в localStorage
- **UserSlice** содержит информацию о пользователе (username, avatar, статус, авторизация)

### 3. Real-time коммуникация
- **SignalR Hub** подключение к `/hubs/chat`
- Автоматическое переподключение при потере соединения
- Обработка входящих сообщений через событие `RecieveMessage`

## Компоненты

### NavBar
- Адаптивная навигационная панель
- Условное отображение кнопок входа/регистрации или профиля пользователя
- Мобильное меню с иконкой гамбургера

### Chat (Основной компонент)
- **Левая панель (25%)**:
  - Список контактов с аватарами
  - Поле поиска
  - Статусы пользователей (online/offline)
- **Правая панель (75%)**:
  - Окно чата с прокруткой
  - Поле ввода сообщений

### ChatWindow
- Отображение списка сообщений
- Автоматическая прокрутка к последнему сообщению
- Кастомные скроллбары

### ChatInput
- Поле ввода текста
- Кнопка отправки (FAB с иконкой)
- Отправка по Enter

### Message
- Отображение отдельного сообщения
- Время отправки
- Информация об отправителе

### Аутентификация
- **SignIn**: форма входа с валидацией
- **SignUp**: форма регистрации с проверкой email
- Интеграция с backend API для аутентификации

## API интеграция

### Endpoints
- `POST /Login` - аутентификация пользователя
- `POST /User/Registration` - регистрация нового пользователя
- `POST /Chat/messages` - отправка сообщения
- `GET /hubs/chat` - SignalR Hub для real-time сообщений

### Переменные окружения
- `REACT_APP_SERVER_HTTP_ROOT` - базовый URL API

## Стилизация

### Material-UI
- Использование компонентов MUI для консистентного дизайна
- Адаптивная сетка (Grid system)
- Темы и кастомизация

### CSS
- Кастомные стили в `Chat.css`
- Адаптивный дизайн
- Стилизация скроллбаров

## Установка и запуск

### Предварительные требования
- Node.js (версия 14 или выше)
- npm или yarn
- Backend API (ASP.NET Core)

### Установка зависимостей
```bash
npm install
```

### Настройка переменных окружения
Создайте файл `.env` в корне проекта:
```
REACT_APP_SERVER_HTTP_ROOT=http://localhost:8000/api
```

### Запуск в режиме разработки
```bash
npm start
```
Приложение будет доступно по адресу `http://localhost:3000`

### Сборка для продакшена
```bash
npm run build
```

### Запуск тестов
```bash
npm test
```

## Известные проблемы и TODO

### В коде обнаружены следующие проблемы:
1. **SignIn.js**: Неправильное использование `useState` (строка 14)
2. **UserSlice.js**: Опечатка в `IsLogedIn` (должно быть `IsLoggedIn`)
3. **SignIn.js**: Неправильное обращение к состоянию `state.User` вместо `state.user`
4. **SignIn.js**: Неиспользуемые переменные `email` и `password`
5. **SignUp.js**: Неправильная ссылка на SignIn в строке 167

### Функциональность требующая доработки:
- Реализация логики входа/выхода в Redux
- Интеграция с реальным API для получения списка пользователей
- Обработка ошибок при отправке сообщений
- Валидация форм
- Обработка состояний загрузки

## Развертывание

### Требования к серверу
- Node.js runtime
- Web server (nginx, Apache)
- Backend API должен быть доступен

### Процесс развертывания
1. Выполните `npm run build`
2. Скопируйте содержимое папки `build` на веб-сервер
3. Настройте переменные окружения для продакшена
4. Убедитесь, что backend API доступен

## Безопасность

### Рекомендации
- Используйте HTTPS в продакшене
- Валидируйте все пользовательские данные
- Реализуйте proper error handling
- Используйте secure cookies для аутентификации
- Настройте CORS правильно

## Производительность

### Оптимизации
- Lazy loading для компонентов
- Мемоизация для предотвращения лишних рендеров
- Виртуализация для больших списков сообщений
- Оптимизация bundle size

## Поддержка браузеров

Приложение поддерживает все современные браузеры:
- Chrome (последняя версия)
- Firefox (последняя версия)
- Safari (последняя версия)
- Edge (последняя версия)

## Лицензия

Проект использует стандартную лицензию Create React App.


